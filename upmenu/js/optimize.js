!function(O,C,P,e){"use strict";O.mdLoadTiming=performance.now();var w=!1,b=[],M={},A={},R={},J={},F=[],S=!1,l=!1,t="1.2.68",r=(O._executedTests=new Set,O.md_int_list={},O.mdq=O.mdq||[],O.m_goal=[],null!==C.querySelector("script[src*='_next/static/']")),a=null!==C.querySelector("#___gatsby"),i=null!==C.getElementById("root"),n="function"==typeof O.Vue,s=C.querySelector('meta[name="generator"]'),s=s&&s.content.includes("Framer"),T=O.isSPA||r||a||i||n||s,I=!1,q=(console.log("mida v"+t),{log:function(){},success:function(){},error:function(){},warning:function(){},step:function(){},getSummary:function(){},displaySummary:function(){}});function V(){return+new Date}function U(e){try{return"string"==typeof e?JSON.parse(e):e}catch(e){return{}}}function o(){["optimize_uuid","mida_redirect"].forEach(e=>{C.cookie=e+"=;expires=Thu, 01 Jan 1970 00:00:00 GMT;domain="+O.cookie_domain+";path=/;"});["_abcache","_variant_result","md_ff","md_pending_events","preview-id","preview-variant"].forEach(e=>{try{localStorage.removeItem(e),sessionStorage.removeItem(e)}catch(e){}}),O.vaId=null,O._abcache=null}O.md_cdn||(O.md_cdn=f("cdn")||"https://cdn.mida.so"),O._h_key||(O._h_key=f("key")),O.md_cache===e&&r&&"1Avp2DgnY6yLGdXJbK9koW"!==O._h_key&&!O.location.href.includes("radius.com")&&(O.md_cache=!1),O.md_cache===e&&(O.md_cache=!0);var c=new URLSearchParams(O.location.search),E=c.get("editor")||null;if(c.has("mida-optout"))return console.log("[mida] mida-optout parameter detected - Mida script will not execute"),(a=C.getElementById("abhide"))&&a.parentNode&&a.parentNode.removeChild(a);var h=f("cookie"),d=sessionStorage,u=h?d:localStorage;if(O.mida={isLoaded:!1,backend_url:f("api")||"https://api-us.mida.so",preview:{},uuid:O._h_uuid,user_id:null,hasConsent:"yes"===(localStorage.getItem("mida_consent")||"no"),isRedirect:!1,userID:function(e){this.user_id=e},reload:y,grantConsent:function(e){console.log("Mida grant consent",e),(e?(this.hasConsent=!0,localStorage.setItem("mida_consent","yes"),u.setItem("mida_consent","yes"),O._abcache&&u.setItem("_abcache",O._abcache),O.vaId&&u.setItem("_variant_result",O.vaId),mida.setCookie("optimize_uuid",O._h_uuid),G):(this.hasConsent=!1,localStorage.setItem("mida_consent","no"),u.setItem("mida_consent","no"),o))()},rmfk:function(){var e=C.getElementById("abhide");e&&e.parentNode&&e.parentNode.removeChild(e)},execute:async function(e){var t=u.getItem("_abcache")||O._abcache;t&&e&&(await O.midaTesting(t,Number(e)),setTimeout(()=>{"function"==typeof O.mpw&&O.mpw(),G()},1e3))},version:function(e){return e?null!==(e=this.getVariant(e))&&0===Number(e)?"Control":e:(e=u.getItem("_variant_result"))?(e=Object.entries(JSON.parse(e)).reduce((e,[t,r])=>(e[t]=r.vaId,e),{}),Object.entries(e).map(([e,t])=>({testId:e,variant:0===t?"Control":t}))):[]},getVariant:function(e){let t=null;var r=O.vaId||u.getItem("_variant_result");return r?(r=(r=U(r))&&r[Number(e)],t=r&&"vaId"in r?r.vaId:t):null},init:function(e){O._h_key=e},identify:function(n){const e=new Promise(async function(t){n.hid=O._h_uuid;var e=await mida.attribution(),r=Object.assign({},n),e=(delete r.hid,Object.assign({},e,r));if(0<Object.keys(e).length)try{var a=O._h_key,i=await mida._enc(e,a);d.setItem("mida_attribution",i)}catch(e){}mida.fetch("/track/"+O._h_key,"POST",n,function(e){e=U(e);O._h_uuid=e.id,O.mida.uuid=e.id,O._hid=e.id,mida.setCookie("optimize_uuid",e.id),t()})});return e.reload=function(){return e.then(function(){return O.mida.reload()})},e},track:function(a,t={}){if(l)return Promise.resolve();let i=V();t.url_origin||(t.url_origin=O.location.origin),t.url_path||(t.url_path=O.location.pathname),t.timestamp||(t.timestamp=i);var e=a+"|"+JSON.stringify(t)+"|"+O._h_session,r=Date.now();if((O._sentEvents||(O._sentEvents=new Map),O._sentEvents.has(e))&&r-O._sentEvents.get(e)<1e3)return Promise.resolve();if(O._sentEvents.set(e,r),50<O._sentEvents.size){var n,s,o=r-1e3;for([n,s]of O._sentEvents)s<o&&O._sentEvents.delete(n)}try{var c=JSON.parse(d.getItem("md_pending_events")||"[]");c.push({event_text:a,event_property:t,session:O._h_session,widget_key:O._h_key,uuid:O._h_uuid,url:O.location.origin+O.location.pathname,href:O.location.href,timestamp:i}),d.setItem("md_pending_events",JSON.stringify(c))}catch(e){console.error("Failed to save event to localStorage:",e)}try{mida._aevt(a,t)}catch(e){console.error("Failed to save event to encrypted cookie:",e)}return new Promise(function(r){var e={event_text:a,event_property:JSON.stringify(t),session:O._h_session,widget_key:O._h_key,uuid:O._h_uuid,url:O.location.origin+O.location.pathname,href:O.location.href};try{"Purchase"===a&&O._revenueGoals&&O._revenueGoals.length&&O._revenueGoals.forEach(e=>{e.goal_id&&(mida.track("goal_"+e.goal_id),mida.converted(e.test_key))})}catch(e){}setTimeout(()=>{var e=J[a];if(e)e.timestamp=i,e.event_name=a,e.variant=null===e.variant?mida.getVariant(e.id):e.variant,O.executeIntegration(e);else if(O.m_goal&&O.m_goal[a]){e=O.m_goal[a];let r=U(u.getItem("_variant_result")||"{}");Array.isArray(e)&&e.forEach(e=>{var t;r[e.id]&&((t={...e}).timestamp=i,t.event_name=a,t.variant=r[e.id].vaId,O.executeIntegration(t))})}},100),mida.fetch("/event/addv3","POST",e,function(e){try{var t=JSON.parse(d.getItem("md_pending_events")||"[]").filter(e=>e.event_text!==a||e.timestamp!==i);d.setItem("md_pending_events",JSON.stringify(t))}catch(e){console.error("Failed to update pending events:",e)}r()})})},converted:function(e){return l?Promise.resolve():new Promise(function(t){mida.fetch("/abtest/convertedv3","POST",{key:e,uuid:O._h_uuid,k:O._h_key},function(e){t()})})},revenue:function(e){return l?Promise.resolve():new Promise(function(t){e.uuid=O._h_uuid,e.k=O._h_key,mida.fetch("/abtest/convertedv3","POST",e,function(e){t()})})},features:[],cachedFeatureFlag:function(){var e=u.getItem("md_ff")||null;return e?(this.features=U(e),this.features):[]},isFeatureEnabled:function(e){return this.features=this.cachedFeatureFlag(),this.features.includes(e)},onFeatureFlags:function(e){let t=this.cachedFeatureFlag().length;this.reloadFeatureFlags().then(()=>{t||e()}).catch(e=>console.error(e)),t&&e()},reloadFeatureFlags:function(){return new Promise((t,r)=>{mida.fetch("/feature-flag","POST",{uuid:O._h_uuid,k:O._h_key,user_id:this.user_id,lang:P.language,url:O.location.href},e=>{try{this.features=JSON.parse(e),u.setItem("md_ff",JSON.stringify(this.features)),t()}catch(e){r(e)}})})},setCookie:function(e,t,r=365,a="d"){var i=new Date,n=O.cookie_domain;if(!n){var s=O.location.hostname;if("localhost"===s||/^\d+\.\d+\.\d+\.\d+$/.test(s))n=s;else{for(var o=s.split("."),c="_domain_test",l=s,d=1;d<o.length;d++){var u="."+o.slice(-d-1).join("."),m=c+"=test;domain="+u+";path=/;";if(C.cookie=c+"=;expires=Thu, 01 Jan 1970 00:00:00 GMT;domain="+u+";path=/;",C.cookie=m,-1!==C.cookie.indexOf(c+"=test")){C.cookie=c+"=;expires=Thu, 01 Jan 1970 00:00:00 GMT;domain="+(l=u)+";path=/;";break}}n=l}O.cookie_domain=n}!h||mida.hasConsent?"h"===a?i.setTime(i.getTime()+60*r*60*1e3):"m"===a?i.setTime(i.getTime()+60*r*1e3):"s"===a?i.setTime(i.getTime()+1e3*r):i.setTime(i.getTime()+24*r*60*60*1e3):i.setTime(i.getTime()+6e4),C.cookie=e+"="+t+";expires="+i.toUTCString()+";domain="+n+";path=/;"},getCookie:function(e){e=C.cookie.match("(^|;)\\s*"+e+"\\s*=\\s*([^;]+)");return e?e.pop():""},attribution:function(){return new Promise(async t=>{var r=d.getItem("mida_attribution")||"";if(r)try{var e=O._h_key;t(await mida._dec(r,e))}catch(e){console.warn("[Mida] Error decrypting user properties, trying as JSON:",e);try{t(JSON.parse(r))}catch(e){console.warn("[Mida] Error parsing user properties from cookie:",e),t({})}}else t({})})},event:function(){return new Promise(async t=>{var r=d.getItem("mida_event")||"";if(r)try{var e=O._h_key,a=await mida._dec(r,e);Array.isArray(a)?t(a):t([])}catch(e){console.warn("[Mida] Error decrypting event properties, trying as JSON:",e);try{var i=JSON.parse(r);Array.isArray(i)?t(i):t([])}catch(e){console.warn("[Mida] Error parsing event properties from cookie:",e),t([])}}else t([])})},_aevt:function(c,l={}){return new Promise(async e=>{if(c.startsWith("goal_")){const s=await mida.event();void e(s)}else{const s=await mida.event();var t={};for(const o in l="string"===l?U(l):l)l.hasOwnProperty(o)&&"timestamp"!==o&&"url_origin"!==o&&"url_path"!==o&&(t[o]=l[o]);var r={n:c},a=(0<Object.keys(t).length&&(r.p=t),s.some(e=>e.n===c)),a=(a||s.push(r),s.slice(-30));if(0<a.length)try{var i=O._h_key,n=await mida._enc(a,i);d.setItem("mida_event",n)}catch(e){console.warn("[Mida] Error encrypting events:",e)}e(a)}})},fetch(e,i,n,s,o=!1){const c=(t=0)=>{const r=new XMLHttpRequest;r.open(i,""+this.backend_url+e,!0),r.setRequestHeader("Content-Type",o?"text/plain":"application/json;charset=UTF-8");let a=!1;r.onreadystatechange=function(){if((this.readyState===r.LOADING||this.readyState===r.DONE)&&200<=this.status&&this.status<300&&!a)try{if(r.responseText&&0<r.responseText.length){var e=r.responseText;if("ok"===e.toLowerCase()||"accepted"===e.toLowerCase())return a=!0,void s(e);if(e.startsWith("{")||e.startsWith("["))try{JSON.parse(e)}catch(e){return}a=!0,s(e)}}catch(e){}this.readyState===r.DONE&&(this.status<200||300<=this.status?t<1&&c(t+1):a||s(r.responseText))},r.send(JSON.stringify(n))};c()},uuid:function(){return new Promise(e=>{const t=()=>{O._h_uuid?e(O._h_uuid):setTimeout(t,100)};t()})},experimentEvent:function(r,a,i={}){return l?Promise.resolve():new Promise(function(t){var e={key:O._h_key,name:r,distinct_id:a||mida.user_id,properties:JSON.stringify(i)};mida.fetch("/experiment/event","POST",e,function(e){t(e)})})},_enc:async function(e,t){var r=crypto.getRandomValues(new Uint8Array(12)),t=await crypto.subtle.importKey("raw",(new TextEncoder).encode(t.padEnd(32,"0")),"AES-GCM",!1,["encrypt"]),t=await crypto.subtle.encrypt({name:"AES-GCM",iv:r},t,(new TextEncoder).encode(JSON.stringify(e))),e=new Uint8Array(r.length+t.byteLength);return e.set(r),e.set(new Uint8Array(t),r.length),btoa(String.fromCharCode(...e))},_dec:async function(e,t){var e=new Uint8Array([...atob(e)].map(e=>e.charCodeAt(0))),r=e.slice(0,12),e=e.slice(12),t=await crypto.subtle.importKey("raw",(new TextEncoder).encode(t.padEnd(32,"0")),"AES-GCM",!1,["decrypt"]),r=await crypto.subtle.decrypt({name:"AES-GCM",iv:r},t,e);return JSON.parse((new TextDecoder).decode(r))}},"no"===localStorage.getItem("mida_consent"))return console.log("Mida script disabled due to declined consent"),o();if(c.has("mida-refresh"))return console.log("[mida] mida-refresh parameter detected - clearing all Mida data"),o(),console.log("[mida] All local Mida data cleared successfully"),(i=mida.getCookie("optimize_uuid")||O._h_uuid)&&O._h_key?mida.fetch("/abtest/clear-visitor","POST",{uuid:i,key:O._h_key},function(e){console.log("[mida] Visitor data deleted from database successfully"),c.delete("mida-refresh");var t=O.location.pathname+(c.toString()?"?"+c.toString():"")+O.location.hash;O.location.href=t}):(c.delete("mida-refresh"),n=O.location.pathname+(c.toString()?"?"+c.toString():"")+O.location.hash,O.location.href=n);O.md_api&&(mida.backend_url=O.md_api);var k,s=c.get("test-preview")||sessionStorage.getItem("preview-id"),e=(s&&(mida.preview.id=s,sessionStorage.setItem("preview-id",s)),c.get("test-variant")||sessionStorage.getItem("preview-variant"));function z(e,t,r){var[a,i]=e.split("?"),[n,s]=t.split("?"),o=a.split("/"),c=n.split("/");let l=-1;var d,u=[];function m(e,t){return t&&(t=t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"),t=new RegExp(t.replace("\\*","(.+)")),e=e.match(t))&&e[1]?e[1]:""}if((n=(a=r).indexOf("*"))===a.lastIndexOf("*")&&-1!==n)return a=m(D(e),D(r)),t.replace("*",a).replace(/\?(.+)\?/,"?$1&");for(let e=0;e<c.length;e++)c[e].includes("*")?(l=-1!==o.indexOf(c[e-1])?o.indexOf(c[e-1])+1:o.length-1,d=m(o[l],c[e]),u.push(c[e].replace("*",d)),o.splice(l,1)):u.push(c[e]);c.includes("*")&&-1!==l&&(n=o.slice(l),u.push(...n));let h=u.join("/"),g="";return i&&s&&(g=m(i,s)),s&&(h+="?"+s.replace("*",g)),h}function $(a){return new Promise(t=>{q.log("element","search",a);try{var r=a.replace(/\.+(\s|$|:|>)/g,"$1").replace(/\.\./g,".").replace(/(?:^|\s)\.(?=\s|$)/g,"").trim();r!==a&&q.log("element","clean",r);try{var e=C.querySelector(r);e?q.success("element","found",[r,{tagName:e.tagName,id:e.id,className:e.className,textContent:e.textContent?e.textContent.substr(0,50)+"...":""}]):q.warning("element","notfound",r),t(e)}catch(e){q.error("element","error",[r,e.message]),console.warn("[mida] Error querying element:",e),t(null)}}catch(e){q.error("element","fail",[a,e.message]),t(null)}})}e&&(mida.preview.variant=e,sessionStorage.setItem("preview-variant",e)),s&&(p("/js/mida-preview.js?v="+t),k=setInterval(function(){O.qaLog&&O.qaLog.init&&((q=O.qaLog).init(),clearInterval(k))},50),setTimeout(function(){clearInterval(k)},2e3)),h&&!mida.hasConsent&&(mida.hasConsent="yes"===(u.getItem("mida_consent")||"no")),a="verify",(new O.URL(O.location.href).searchParams.get(a)||"")===O._h_key&&mida.fetch("/widget/active/"+O._h_key,"GET",{},()=>{});let K=async(t,r=!1)=>{t.distribution;let e=[];O.abdata.length&&(e=O.abdata.map(e=>e.name));[a=100]=[Number(t.traffic_allocation)];var a=(()=>{var e=BigInt("0x"+O._h_uuid);let t=Number(e%BigInt(Number.MAX_SAFE_INTEGER));var e=Math.random,r=(Math.random=function(){var e=1e4*Math.sin(t++);return e-Math.floor(e)},Math.floor(100*Math.random()+1));return Math.random=e,r})()<a;let i;if(a){r?e.length&&(i=e[0]):i=null!==t.variation?t.variation:(e.push("-1"),0===Number(t.last_variant)&&(t.last_variant="-1"),(e=e.filter(e=>e!==t.last_variant))[Math.floor(Math.random()*e.length)]);a=O.abdata.filter(e=>e.name===i),a=a.length?a[0].name:0;try{let e={};var n=u.getItem("_variant_result");(e=n?U(n):e)[t.test_id]||r||(e[t.test_id]={vaId:a,uuid:O._h_uuid,complete:0}),r&&(e[t.test_id]={vaId:a,uuid:O._h_uuid,complete:0,personalize:1}),e[t.test_id]&&t.complete&&(e[t.test_id].complete=t.complete),O.vaId=JSON.stringify(e),mida.preview.id||u.setItem("_variant_result",O.vaId)}catch(e){console.error(e)}}};function x(){new Promise(async(t,e)=>{O.ga_device_id=mida.getCookie("_ga"),O.ga_uuid=O.ga_device_id.split(".").slice(2).join(".");var r,a=mida.getCookie("optimize_uuid")||O._h_uuid;a&&"undefined"!==a?(O._h_uuid=a,t()):(w=!0,a=function(){try{var e=C.createElement("canvas"),r=e.getContext("2d"),a=(e.width=64,e.height=16,r.fillStyle="#123456",r.fillRect(0,0,32,8),r.fillStyle="#abcdef",r.fillRect(32,8,32,8),r.getImageData(0,0,32,8).data);let t=0;for(let e=0;e<a.length;e+=8)t=31*t+a[e]>>>0;return(t>>>0).toString(36).padStart(6,"0").slice(0,6)}catch(e){return(31*(P.userAgent.length+O.screen.width>>>0)>>>0).toString(36).slice(0,6)}}(),a={key:O._h_key,ua:P.userAgent,lang:P.language,platform:P.platform,height:O.screen.height,width:O.screen.width,color:O.screen.colorDepth,tz:Intl.DateTimeFormat().resolvedOptions().timeZone,l:O.location.href,canvas:a},C.referrer&&(a.r=C.referrer),mida.user_id&&(a.user_id=mida.user_id),O.ga_uuid&&(a.gid=O.ga_uuid),(r=c.get("spoof-ip"))&&(a.spoofIP=r),mida.fetch("/init/uuid","POST",a,e=>{e=U(e);e.setting?(mida.setCookie("optimize_uuid",e.uuid),O._h_uuid=e.uuid,O._h_session=e.session,j(e.setting,e.global),O.m_goal=e.goal):(l=!0,console.log("[Mida] Project is inactive, stopping all tracking")),t()},!0))}).then(()=>{if(w||y(),!0===T&&ae(function(e){for(var t in F=[],O._executedTests.clear(),'[id^="mcss_"],[id^="mccss_"],[id^="cocss"],[id="mgcss"],[id^="mjs_"],[id^="mcjs_"],[id^="cjs_"],[id="mgjs"]'.split(",").forEach(e=>{C.querySelectorAll(e).forEach(e=>e.parentNode&&e.parentNode.removeChild(e))}),O)t.endsWith("x")&&(t.startsWith("mjs_")||t.startsWith("mcjs_")||t.startsWith("cjs_"))&&delete O[t];y()}),!O.otag){if(O.mdq&&O.mdq.length)for(let e=0;e<O.mdq.length;e++)L(O.mdq[e]);O.mdq.pushToList=function(){try{for(let e=0;e<arguments.length;e++){var t=arguments[e];Array.prototype.push.call(this,t),L(t)}}catch(e){console.error("Error processing event:",e)}return this.length},O.mdq.push=O.mdq.pushToList;try{var e=JSON.parse(d.getItem("md_pending_events")||"[]");e.length&&(d.setItem("md_pending_events","[]"),e.forEach(e=>{mida.track(e.event_text,e.event_property)}))}catch(e){console.error("Failed to process pending events:",e)}}let r={};c.forEach(function(e,t){(t.startsWith("mida_")||t.startsWith("utm_")||"ref"===t||"referral"===t||"referrer"===t)&&e&&(r[t]=e)}),0<Object.keys(r).length&&mida.identify(r),p("/js/mida-integration.js?v="+t)}).catch(e=>{console.error(e)})}function D(e){return m(e.toString().replace(/\/\/www\./g,"//").replace(/^(www\.)?/,""))}function m(e){return e.toString().replace(/\/+$/,"")}function g(e,t,r){var a=()=>e(t,r);"loading"===C.readyState?C.addEventListener("DOMContentLoaded",a):a()}function p(t){if(!b.includes(t)){let e=C.createElement("script");e.type="text/javascript",e.src=""+O.md_cdn+t,e.async=!0,e.crossorigin="anonymous",C.body?C.body.appendChild(e):C.addEventListener("DOMContentLoaded",()=>{C.body.appendChild(e)}),b.push(t)}}function L(e){var t=e[0],e=Array.prototype.slice.call(e,1);"function"==typeof mida[t]&&mida[t].apply(mida,e)}function f(t){var r=C.getElementsByTagName("script");let a=null;for(let e=0;e<r.length;e++){var i,n=r[e];if(n.src){let e=null;try{e=new O.URL(n.src)}catch(e){}if("cdn"===t&&e&&e.hostname.endsWith(".mida.so"))return e.protocol+"//"+e.hostname;if("api"===t&&e&&e.hostname.endsWith(".mida.so"))return`https://api-${(i=e.hostname.match(/(?:^|-)([a-z]{2})(?:\.|$)/))?i[1]:"us"}.mida.so`;if(e&&e.hostname.endsWith(".mida.so")){if(e.searchParams.has(t))return e.searchParams.get(t);if(n.getAttribute(t))return n.getAttribute(t)}else e&&e.searchParams.has(t)?a=e.searchParams.get(t):n.getAttribute(t)&&(a=n.getAttribute(t))}}return a||!1}function X(t,r){if(t&&r){t=JSON.parse(t);if(t.length){for(var a of t)if(!a.allowed&&n(a.rule,a.url,r))return;let e=!1;for(var i of t)if(i.allowed){if(n(i.rule,i.url,r))return 1;e=!0}return!e;function n(r,a,i){a=a.trim();let e=null;try{e=new RegExp(a)}catch(e){}if("simple"!==r)return"exact"===r?a===i:"regex"===r?e&&e.test(i):"contain"===r&&i.includes(a);{a.trim().startsWith("http")||(a="https://"+a);r=new URL(a),a=new URL(i);let e=r.hostname+r.pathname,t=a.hostname+a.pathname;return e=e.replace(/^www\./,"").replace(/\/$/,""),t=t.replace(/^www\./,"").replace(/\/$/,""),e===t}}}}}function G(){return new Promise(function(e){if(l||h&&!mida.hasConsent)return e();function t(){clearTimeout(r),e()}var r=setTimeout(e,2e3);try{var a=Object.assign({},U(u.getItem("_variant_result")),U(O.vaId)),i=JSON.stringify(a);if(!Object.keys(a).length||O._lastSentPayload===i)return t();u.setItem("_variant_result",i),O._lastSentPayload=i,fetch(`${mida.backend_url||"https://api.mida.so"}/abtest/visitor`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({uuid:O._h_uuid,key:O._h_key,variation:i,bot:S}),keepalive:!0,credentials:"omit"}).then(()=>{t()}).catch(()=>{t()})}catch(e){t()}})}async function j(t,e=!1){if(mida.preview.id||E||"[]"===t||u.setItem("_abcache",t),O._abcache=t,e&&e.js&&(B(`function mgjs() { ${e.js} }`,"mgjs"),setTimeout(()=>{try{mgjs()}catch(e){}},0)),e&&e.css&&B(e.css,"mgcss","css"),!e)try{let e=JSON.parse(t);e=e.filter(e=>0!==Number(e.cache)),t=JSON.stringify(e)}catch(e){}"[]"===t||mida.isRedirect||(await O.midaTesting(t),r&&!O.md_cache&&(O.md_cache=!0)),setTimeout(()=>{var e=document.getElementById("wpr-usedcss");e&&(e.innerHTML=e.innerHTML.replace(/body\s*\{\s*opacity\s*:\s*0\s*;?\s*\}/,"")),mida.isRedirect||mida.rmfk()},50),setTimeout(()=>{O.mfunc&&Array.isArray(O.mfunc)&&(O.mfunc.forEach(e=>{try{e()}catch(e){}}),O.mfunc=[]),G()},200)}function B(e,t,r="javascript"){var a;C.getElementById(t)||((a=C.createElement("css"===r?"style":"script")).setAttribute("id",t),a.setAttribute("type","text/"+r),t=C.createTextNode(e),a.appendChild(t),(C.body||C.head).appendChild(a))}function Y(e,t,r,a,i,n){q.log("js",a,r);let s=t+"_"+r;B(`function ${s}() { ${e} }`,s),setTimeout(()=>{try{O[s+"x"]||(O[s](),q.success("js",i,s)),O[s+"x"]=!0}catch(e){q.error("js",n,[s,e.message]),"cjs"===t&&console.error("Error executing control JS:",e)}},0)}var _=null,v=null,N=!(O.midaTesting=async(e,t=null)=>{if(!mida.isRedirect){q.log("test","start",{onlyTestId:t,resultLength:e?e.length:0}),O.applyStart=V();var l,d,u,r=U(e);if(r&&Array.isArray(r)){if(q.log("test","process",r.length),t&&(F=[],O._executedTests.clear(),["#mcss_"+t,"#mccss_"+t,"#mjs_"+t,"#mcjs_"+t,"#cjs_"+t].forEach(e=>{e=C.querySelector(e);e&&e.parentNode&&e.parentNode.removeChild(e)}),[`mjs_${t}x`,`mcjs_${t}x`,`cjs_${t}x`].forEach(e=>{O[e]&&delete O[e]})),e&&r)for(let e=0;e<r.length;e++){let s=r[e],o=s.test_id;var m,h=s.test_name,g=s.trigger_variant_change;if(q.step(e+1,r.length,`Processing test: ${h} (ID: ${o})`,{testId:o,testName:h,spaRule:g,isPreview:!!mida.preview.id}),O._executedTests.has(o))q.warning("test","exec",o);else if(t&&t!==o)q.log("test","skip",[o,t]);else if(t||"donotstart"!==g){if((!mida.preview.id||Number(o)===Number(mida.preview.id))&&s){let r=null,a=null;if(s.targeting)try{var p=U(s.targeting);r=p.parameter_rule,a=p.schedule_rule}catch(e){console.error("Error parsing targeting:",e)}try{"{}"!==s.integration&&(m=U(s.integration),O.md_int_list[o]=m)}catch(e){}let c=!1;U(s.data);var f=O.location,f=(f.protocol,D(f.hostname),D(f.hostname),new URL(O.location.href)),_=new URLSearchParams(f.search),v=(_.delete("test-preview"),_.delete("test-variant"),f.search=_.toString(),f.toString());let i=!1,n=U(s.data);if(q.log("url","check",[o,{currentUrl:v,testUrls:Object.keys(n)}]),(i=te(n,null,v))?q.success("url","match",[o,i]):q.error("url","nomatch",o),!t&&"direct"!==g)if("URLChange"===g){if(M[o]||(M[o]=ae(function(e){let t=te(n,s.test_url_rule,e);t&&r&&(W(r,e)||(t=!1)),t&&a&&(re(a,o)||(t=!1)),t?mida.execute(o):(["#mcss_"+o,"#mccss_"+o,"#mjs_"+o,"#mcjs_"+o,"#cjs_"+o].forEach(e=>{e=C.querySelector(e);e&&e.parentNode&&e.parentNode.removeChild(e)}),[`mjs_${o}x`,`mcjs_${o}x`,`cjs_${o}x`].forEach(e=>{O[e]&&delete O[e]}),O._executedTests.delete(o))})),i){let e=!0;(e=r?W(r,v):e)&&mida.execute(o)}}else if("URLChangeAndWaitFor"===g&&!M[o]&&(M[o]=ae(function(e){let t=te(n,s.test_url_rule,e);t&&r&&(W(r,e)||(t=!1)),t&&(R[o]&&clearInterval(R[o]),R[o]=setInterval(()=>{C.querySelector(s.dom_change_path)&&(mida.execute(o),clearInterval(R[o]))},10))}),i)){let e=!0,t=!0;r&&(e=W(r,v)),a&&(t=re(a,o)),e&&t&&C.querySelector(s.dom_change_path)&&mida.execute(o)}if(s.test_url_rule&&!X(s.test_url_rule,v)&&(i=!1,q.error("url","rule",o)),i&&r&&(W(r,v)||(i=!1,q.error("url","param",o))),i&&a&&(q.log("schedule","schedcheck",o),re(a,o)||(i=!1)),i)if(O.abdata=n[i],q.success("url","proceed",[i,{testId:o,matchedPattern:i,testprofile:n[i]}]),t||"direct"===g){var _=!s.is_ab,y=null;let e=null,t=null,r=null,a=mida.getVariant(s.test_id);q.log("variant","get",[o,{priorChosenVersion:a,isPreview:!!mida.preview.variant,previewVariant:mida.preview.variant}]),mida.preview.variant&&(a=mida.preview.variant.replace(/_/," "),q.log("variant","preview",a));var f=!0===s.is_aa,w=(f&&q.log("variant","aa",o),null!==a&&!_||(s.result=U(s.result),K(s,_)),mida.getVariant(s.test_id));if(!mida.preview.variant&&0!==mida.preview.variant||(w=mida.preview.variant.toString().replace(/_/," ")),q.log("variant","final",[o,w,{testId:o,variantName:w,isPersonalization:_,isAATest:f}]),f)J["goal_"+s.goal_id]={id:o,name:h,variant:w},"event"===s.goal_type&&(J[s.goal_value]={id:o,name:h,variant:w}),O._executedTests.add(o);else{if(w&&(_=O.abdata.filter(e=>e.name===w)).length&&(y=(f=_[0]).data,e=f.customCSS||null,t=f.customJS||null),0===Number(w)&&(q.log("variant","control",o),_=s.control_attr&&s.control_attr.js,(f=s.control_attr&&s.control_attr.css)&&(q.log("js","css",o),B(f,"cocss","css")),_)&&Y(_,"cjs",o,"ctrljs","ctrlok","ctrlerr"),J["goal_"+s.goal_id]={id:o,name:h,variant:w},"event"===s.goal_type&&(J[s.goal_value]={id:o,name:h,variant:w}),e&&B(e,"mcss_"+o,"css"),s.custom_css&&B(s.custom_css,"mccss_"+o,"css"),y){q.log("dom","domstart",[o,{dataLength:y.length,variant:w}]);for(let o=0;o<y.length;o++){let s=y[o];var b,S,T=s.url;q.log("dom","change",[o+1,y.length,{changeIndex:o,versionUrl:T,hasRedirect:!!T,hasRemove:!!s.rm,hasMove:!!(s.dir&&s.oriEl&&s.refEl),hasInsert:!!(s.dir&&s.refEl&&s.htmlBlock),hasTarget:!!s.target}]);try{var I=new O.URL(T),E=O.location.href,k=z(E,T,i),x=z(E,T,T);if(T.includes("*")&&D(k)!==D(E)&&D(x)!==D(E)||!T.includes("*")&&(D(O.location.hostname)!==D(I.hostname)||O.location.pathname!==I.pathname||I.search&&!O.location.search.includes(I.search)||I.hash&&O.location.hash!==I.hash)){r=T.includes("*")&&T!=E?k:T;var L=C.head.innerHTML.includes("previewBarInjector"),j=null!==C.querySelector("#PBarNextFrameWrapper");let o,c=D(E)!==D(r);if(r&&r.includes("preview_theme_id")?await new Promise(r=>{let a=0;const i=100,n=100,s=()=>{var e=C.head.innerHTML.includes("previewBarInjector"),t=null!==C.querySelector("#PBarNextFrameWrapper");e||t?(o=!1,r()):a>=i?(o=c,r()):(a++,setTimeout(s,n))};s()}):o=!(L||j)&&c,o&&!mida.isRedirect){mida.isRedirect=!0,B("body{opacity:0}","mida-redirect-hide","css"),await G(),await new Promise(e=>setTimeout(e,150)),mida.setCookie("mida_redirect","true",30,"s"),u=void 0,u=P.userAgent||"",/FBAN|FBAV|FBIOS|FB4A|Instagram/i.test(u)&&await new Promise(e=>setTimeout(e,200));let e=s.relay_param?function(e,t){var r,a,[e,t]=[new URL(e),new URL(t)],[i,n]=[e.searchParams,t.searchParams];for([r,a]of i)n.has(r)||n.set(r,a);return e.hash&&(t.hash=e.hash),t.toString()}(E,r):r;e&&e.includes("://.")&&(e=e.replace(/^https?:\/\/\./,"https://")),O.location.href=e}}}catch(e){}try{let n=o+JSON.stringify(s);if(!F.includes(n)&&"rm"in s?(q.log("dom","remove",s.rm),await $(s.rm).then(e=>{e?(e.parentNode.removeChild(e),q.success("dom","removed",s.rm),F.push(n),c=!0):q.error("dom","rmfail",s.rm)})):!F.includes(n)&&s.dir&&s.oriEl&&s.refEl?(q.log("dom","move",[s.oriEl,"a"===s.dir?"after":"before",s.refEl]),b=await $(s.oriEl),S=await $(s.refEl),mida.preview.variant&&b&&b instanceof HTMLElement&&b.classList.add("abhighlight"),b&&S&&"a"===s.dir?(l=b,(d=S)&&l&&d.nextSibling&&d.parentNode.insertBefore(l,d.nextSibling),q.success("dom","moved",["after",s.oriEl,"after",s.refEl]),F.push(n),c=!0):b&&S&&"b"===s.dir?(S.parentNode.insertBefore(b,S),q.success("dom","moved",["before",s.oriEl,"before",s.refEl]),F.push(n),c=!0):q.error("dom","movefail",{targetFound:!!b,referenceFound:!!S,direction:s.dir})):!F.includes(n)&&s.dir&&s.refEl&&"htmlBlock"in s?(q.log("dom","insert",["a"===s.dir?"after":"b"===s.dir?"before":"p"===s.dir?"inside":"",s.refEl]),await $(s.refEl).then(async e=>{var t,r;e?(t="a"===s.dir?"afterend":"b"===s.dir?"beforebegin":"p"===s.dir?"afterbegin":"",r=await H(s.htmlBlock),e.insertAdjacentHTML(t,r),q.success("dom","inserted",[t,s.refEl]),F.push(n),c=!0):q.error("dom","insfail",s.refEl)})):s.target&&(q.log("dom","modify",s.target),await $(s.target).then(async t=>{if(t&&t instanceof HTMLElement){q.log("dom","target",{tagName:t.tagName,id:t.id,className:t.className});let e=["textContent","innerText","innerHTML","src","href"],a=["style","class"];for(const i of e)if(i in s){let e=s[i];["textContent","innerText","innerHTML"].includes(i)&&(e=await H(e)),t[i]=e,q.success("dom","prop",[i,e.substr?e.substr(0,50)+"...":e]),"src"===i&&"IMG"===t.tagName&&t.hasAttribute("srcset")&&(t.removeAttribute("srcset"),q.log("dom","srcset"))}var r;a.forEach(e=>{e in s&&(t.setAttribute(e,s[e]),q.success("dom","attr",[e,s[e].substr?s[e].substr(0,50)+"...":s[e]]))}),!F.includes(n)&&"outerHTML"in s&&(r=await H(s.outerHTML),t.outerHTML=r,q.success("dom","outer",s.target),F.push(n),c=!0),mida.preview.variant&&t.classList.add("abhighlight"),o===y.length-1&&setTimeout(async()=>{const t=C.querySelector(s.target);if(t&&t instanceof HTMLElement){for(const r of e)if(r in s){let e=s[r];["textContent","innerText","innerHTML"].includes(r)&&(e=await H(e)),t[r]!==e&&(t[r]=e,"src"===r)&&"IMG"===t.tagName&&t.hasAttribute("srcset")&&t.removeAttribute("srcset")}a.forEach(e=>{e in s&&t.getAttribute(e)!==s[e]&&t.setAttribute(e,s[e])})}},100)}else q.error("dom","notelem",s.target)})),o<y.length-1){var N=y[o+1];let e=null;N.target?e=N.target:N.rm?e=N.rm:N.oriEl?e=N.oriEl:N.refEl&&(e=N.refEl),e&&!C.querySelector(e)&&(q.log("dom","wait",e),await function(t){return new Promise(e=>setTimeout(e,t))}(100))}}catch(e){console.error(e)}}}t&&Y(t,"mjs",o,"varjs","varok","varerr"),s.custom_js&&Y(s.custom_js,"mcjs",o,"campjs","campok","camperr"),c?(O._executedTests.add(o),q.success("test","done",[o,h])):q.log("test","nochange",[o,h])}}else{if(("DOMChange"===g||"specificDOMChange"===g)&&!mida.preview.variant){f=C.documentElement;try{"specificDOMChange"===g&&s.dom_change_path&&(f=C.querySelector(s.dom_change_path));let e=null,t;M[o]||(A[o]=!0,setTimeout(()=>{A[o]=!1},500),M[o]=new MutationObserver(function(){A[o]||(A[o]=!0,clearTimeout(e),e=setTimeout(()=>{mida.execute(o),setTimeout(()=>{A[o]=!1},500)},500))}),t={attributes:!0,childList:!0,characterData:!0},M[o].observe(f||C.documentElement,{attributes:!0,childList:!0,characterData:!0}))}catch(e){console.error(e)}}R[o]&&clearInterval(R[o]),"waitFor"===g&&(R[o]=setInterval(()=>{if(C.querySelector(s.dom_change_path)){let e=!0;(e=r?W(r,v):e)&&(mida.execute(o),clearInterval(R[o]))}},10))}else q.error("url","urlskip",[o,{testId:o,currentUrl:v,availablePatterns:Object.keys(n)}]),mida.getCookie("mida_redirect")||setTimeout(()=>{"function"==typeof O.showToast&&O.showToast("Preview Err: the current setup targeting URL and the current URL do not match.")},3e3)}}else q.log("test","spa",o)}G(),setTimeout(()=>{mida.isLoaded=!0,q&&q.enabled&&(q.log("system","complete"),q.displaySummary())},100)}else q.error("test","Invalid test data",{result:e})}});function y(){var e,t;O.md_cache&&!mida.preview.id&&((e=u.getItem("_abcache"))&&g(j,e),u.removeItem("_abcache")),mida.isRedirect||(e=mida.preview.id,e={k:O._h_key,url:O.location.href,lang:P.language,uuid:O._h_uuid,gid:O.ga_uuid,preview:e},mida.user_id&&(e.user_id=mida.user_id),C.referrer&&(e.r=C.referrer),(t=d.getItem("mida_event")||"")&&(e.e=t),(t=d.getItem("mida_attribution")||"")&&(e.a=t),(t=c.get("spoof-ip"))&&(e.spoofIP=t),mida.fetch("/test/setting2","POST",e,e=>{e=U(e);e.setting?(O._h_session=e.session,j(e.setting,e.global),O.m_goal=e.goal):(l=!0,console.log("[Mida] Project is inactive, stopping all tracking"))},!0),g(function(){v&&(clearInterval(v),v=null),_&&_.parentNode&&_.parentNode.removeChild(_),(_=C.createElement("div")).id="_mida_sentinel",_.style.cssText="display:none!important;position:absolute!important;",C.body?C.body.appendChild(_):g(function(){C.body&&_&&!_.parentNode&&C.body.appendChild(_)}),v=setInterval(function(){_&&!N&&C.body&&!C.body.contains(_)&&(N=!0,clearInterval(v),v=null,setTimeout(function(){y(),N=!1},50))},200)}))}var Z=!1;function Q(){Z||l||(p("/js/mida-event.js?v="+t),p("/js/mida-goal.js?v="+t),setTimeout(()=>{mida.fetch("/widget/event/"+O._h_key,"GET",null,O.processEvent)},250),mida.track("_pageview"),Z=!0)}function ee(){g(p,"/js/live-editor.js?v="+t)}if(C.addEventListener("mousemove",Q),setTimeout(Q,1e3),O.opener||E){!O.opener&&E&&ee();i="addEventListener"in O;if(O[i?"addEventListener":"attachEvent"](i?"message":"onmessage",e=>{var{event_id:e,previewId:t,previewVariant:r}=e.data;"5959"===e?ee():"5960"===e&&Object.assign(mida.preview,{id:t,variant:r})},!1),O.opener)try{O.opener.postMessage({event_id:"5555",data:{status:"load-editor"}},"*")}catch(e){console.error(e)}}if(r&&"1Avp2DgnY6yLGdXJbK9koW"!==O._h_key&&!O.location.href.includes("radius.com")){let e,t=new MutationObserver(()=>{clearTimeout(e),e=setTimeout(()=>{t.disconnect(),I=!0,x()},200)});t.observe(C.body,{childList:!0,subtree:!0}),setTimeout(()=>{I||(t.disconnect(),x())},1e3)}else x();function te(e,t,r){var a=r?new URL(r):O.location,i=a.protocol+"//"+D(a.hostname)+a.pathname,a=a.protocol+"//www."+D(a.hostname)+a.pathname,r=new URL(r||O.location.href),n=new URLSearchParams(r.search),n=(n.delete("test-preview"),n.delete("test-variant"),r.search=n.toString(),r.toString());let s=[i,m(i),a,m(a),m(n),D(n)],o=Object.keys(e).find(t=>{if(s.some(e=>t.toLowerCase()===e.toLowerCase()))return q.success("url-debug",`Pattern "${t}" matched directly!`,{pattern:t,matchingUrls:s.filter(e=>t.toLowerCase()===e.toLowerCase())}),!0;let r=new RegExp("^"+t.replace(/\*/g,".*").replace(/\?/g,"\\?").replace(/\/+$/g,"").replace("//www.","//(www.)?")+"$","i");var e=s.some(e=>r.test(e.toLowerCase()));return e?q.success("url-debug",`Pattern "${t}" matched with regex!`,{pattern:t,regex:r.toString(),matchingUrls:s.filter(e=>r.test(e.toLowerCase()))}):q.warning("url-debug",`Pattern "${t}" did not match any URL variations`,{pattern:t,regex:r.toString(),urlVariations:s.map(e=>e.toLowerCase()),testResults:s.map(e=>({url:e.toLowerCase(),matches:r.test(e.toLowerCase())}))}),e});return o=t&&!X(t,n)?!1:o}function W(e,t){if(!e||!t)return!0;let r=null;try{r="object"==typeof e?e:JSON.parse(e)}catch(e){return!0}var a,i=new URL(t).searchParams;let n=!1;for(a in r){var s,o=r[a];let e=!1;for(s in o){var c=o[s].criteria,l=o[s].operator,d=o[s].value;if(function(e="",t,r=""){let a=!1;try{e=e.toString(),r=r.toString()}catch(e){}return"=="===t&&(a=e===r),"!="===t&&(a=e!==r),"**"===t&&"string"==typeof e&&"string"==typeof r&&(a=-1<e.toLowerCase().indexOf(r.toLowerCase())),"!*"===t&&"string"==typeof e&&"string"==typeof r&&(a=-1===e.toLowerCase().indexOf(r.toLowerCase())),"ex"===t&&(a=Boolean(e)),a="nx"===t?!e:a}(i.get(c),l,d)){n=!0,e=!0;break}}if(!1===e){n=!1;break}}return n}function re(e,t){if(!e)return!0;if(null!==mida.getVariant(t))return q.success("schedule","schedskip",t),!0;let r=null;try{r="object"==typeof e?e:JSON.parse(e)}catch(e){return!0}if(!r||!r.scheduleGroups||0===r.scheduleGroups.length)return!0;var e=new Date,a=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"][e.getDay()],i=60*e.getHours()+e.getMinutes(),n=String(Math.floor(i/60)).padStart(2,"0")+":"+String(i%60).padStart(2,"0");q.log("schedule","schedinfo",[t,r.scheduleGroups.length]);for(var s=0;s<r.scheduleGroups.length;s++){var o=r.scheduleGroups[s],c=o.days?o.days.join(", "):"none",l=o.timeRanges?o.timeRanges.map(function(e){return e.start+"-"+e.end}).join(", "):"none";if(q.log("schedule","schedgroup",[s+1,c,l]),o.days&&-1!==o.days.indexOf(a))for(var d=0;d<o.timeRanges.length;d++){var u=o.timeRanges[d],m=u.start.split(":"),u=u.end.split(":"),m=60*parseInt(m[0],10)+parseInt(m[1],10),u=60*parseInt(u[0],10)+parseInt(u[1],10);if(u<m?m<=i||i<=u:m<=i&&i<=u)return q.success("schedule","schedmatch",[t,a,n,"Group "+(s+1)+": "+c+" at "+l]),!0}}return q.error("schedule","schednomatch",[t,a,n]),!1}function ae(e){let t=location.href;const r=new MutationObserver(function(){location.href!==t&&(t=location.href,e(t))});function a(){location.href!==t&&(t=location.href,e(t))}return r.observe(C,{subtree:!0,childList:!0}),O.addEventListener("popstate",a),function(){r.disconnect(),O.removeEventListener("popstate",a)}}async function H(t){if(!t||"string"!=typeof t)return t;try{const a=await mida.attribution();var e=t.replace(/{{([ ]*[a-z0-9_-]+[ ]*\|?[ ]*[^}]*)}}/gi,(e,t)=>{var[t,,]=t.trim().split("|").map(e=>e.trim());let r="";return(r=a&&a.hasOwnProperty(t)?(a[t]||"").toString():r).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\"/g,"&quot;").replace(/\'/g,"&#39;").replace(/\//g,"&#x2F;")});return t!==e&&O._h_debug&&console.log("[Mida Debug] parseKeywordFromAttribution:",{original:t,result:e,attributionData:a}),e}catch(e){return console.warn("[Mida] Error parsing keywords from attribution:",e),t.replace(/{{([ ]*[a-z0-9_-]+[ ]*\|?[ ]*[^}]*)}}/gi,"")}}}(window,document,navigator);